\documentclass{article}

\usepackage{graphicx}
%\usepackage{geometry}
\usepackage{placeins} % use float barriers
\usepackage{float}
\usepackage{subcaption}
\usepackage{longtable}
\usepackage[a4paper,margin=1in]{geometry}
\usepackage{grffile}
\usepackage{multirow}

\title{RL benchmark for the reaching task}
\date{}

\begin{document}

\maketitle


\section{Introduction and methods}

The Reacher environment is used to benchmark the performance of selected RL algorithms. The Reacher environments are composed of 1 to 6 joints, for example see Figure \ref{reacher6dof}. The RL algorithms tested are: A2C, ACKTR, DDPG, PPO1, PPO2, SAC and TRPO as implemented in the Stable Baselines library using the default parameters. Each agent was trained for 1M time steps. The performance metrics are defined as follows:

\begin{enumerate}
  \item Train time (min) [1] : Wall time to train for 1M time steps.
  \item Success ratio [2] : number of successful episodes / number of reachable episodes (in this case: number of reachable episodes = 100) \\ 
An episode is successful if the distance between the finger tip and the target is less or equal to 0.01. \\ 
The length of a robot link is 0.1.
  \item Average reaching time [3] : sum (number of time steps of all successful episodes) /  number of successful episodes \\ 
An episode has a maximum of 100 time steps.
\end{enumerate}



\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth]{reacher6dof.png}
\caption{The Reacher environment with 6 DoF.}
\label{reacher6dof}
\end{figure}


\section{Raw results}




% Please add the following required packages to your document preamble:
% \usepackage{multirow}
%\begin{table}[]
\begin{longtable}{llllll} \hline
Environment                                                                     & Physics engine                                                           & RL algorithm & Train time (min) {[}1{]} & Success ratio {[}2{]} & Average reach time {[}3{]}  \\ \hline
\multirow{8}{*}{\begin{tabular}[c]{@{}l@{}}Reacher 2D\\ 1 joint\end{tabular}}   & \multirow{8}{*}{PyBullet}                                                & A2C          & 10.83                    & 0.14                  & 32.36                      \\
                                                                                &                                                                          & ACKTR        & 8.98                     & 0.16                  & 33.94                      \\
                                                                                &                                                                          & DDPG         & 31.63                    & 0.07                  & 14                         \\
                                                                                &                                                                          & PPO1         & 9.01                     & 0.17                  & 17.18                      \\
                                                                                &                                                                          & PPO2         & 9.57                     & 0.09                  & 8.56                       \\
                                                                                &                                                                          & SAC          & 49.41                    & 0.13                  & 13.85                      \\
                                                                                &                                                                          & TRPO         & 7.79                     & 0.12                  & 35.42                      \\
                                                                                &                                                                          & TD3          & 32.42                    & 0.1                   & 21.9                       \\ \hline
\multirow{8}{*}{\begin{tabular}[c]{@{}l@{}}Reacher 2D \\ 2 joints\end{tabular}} & \multirow{8}{*}{PyBullet}                                                & A2C          & 12.13                    & 0.15                  & 39.6                       \\
                                                                                &                                                                          & ACKTR        & 9.83                     & 0.91                  & 42.73                      \\
                                                                                &                                                                          & DDPG         & 32.68                    & 0.08                  & 18.75                      \\
                                                                                &                                                                          & PPO1         & 9.8                      & 0.04                  & 23                         \\
                                                                                &                                                                          & PPO2         & 10.18                    & 0.09                  & 35.89                      \\
                                                                                &                                                                          & SAC          & 45.35                    & 0.5                   & 28.59                      \\
                                                                                &                                                                          & TRPO         & 8.59                     & 0.01                  & 84                         \\
                                                                                &                                                                          & TD3          & 33.29                    & 0.33                  & 40.64                      \\ \hline
\multirow{8}{*}{\begin{tabular}[c]{@{}l@{}}Reacher 2D\\ 3 joints\end{tabular}}  & \multirow{8}{*}{PyBullet}                                                & A2C          & 12.34                    & 0.14                  & 41                         \\
                                                                                &                                                                          & ACKTR        & 10.44                    & 0.59                  & 58.35                      \\
                                                                                &                                                                          & DDPG         & 33.61                    & 0.12                  & 34.17                      \\
                                                                                &                                                                          & PPO1         & 10.34                    & 0.09                  & 55.22                      \\
                                                                                &                                                                          & PPO2         & 10.77                    & 0.12                  & 42.58                      \\
                                                                                &                                                                          & SAC          & 45.61                    & 0.36                  & 49.03                      \\
                                                                                &                                                                          & TRPO         & 9.09                     & 0.14                  & 54.93                      \\
                                                                                &                                                                          & TD3          & 34.13                    & 0.13                  & 36.54                      \\ \hline
\multirow{8}{*}{\begin{tabular}[c]{@{}l@{}}Reacher 2D\\ 4 joints\end{tabular}}  & \multirow{8}{*}{PyBullet}                                                & A2C          & 12.84                    & 0.06                  & 43.67                      \\
                                                                                &                                                                          & ACKTR        & 10.93                    & 0.13                  & 49.46                      \\
                                                                                &                                                                          & DDPG         & 34.51                    & 0.08                  & 57.25                      \\
                                                                                &                                                                          & PPO1         & 10.96                    & 0.08                  & 26.12                      \\
                                                                                &                                                                          & PPO2         & 11.25                    & 0.07                  & 45.43                      \\
                                                                                &                                                                          & SAC          & 46.8                     & 0.27                  & 45.15                      \\
                                                                                &                                                                          & TRPO         & 9.61                     & 0.13                  & 56.54                      \\
                                                                                &                                                                          & TD3          & 34.59                    & 0.21                  & 45.38                      \\ \hline
\multirow{8}{*}{\begin{tabular}[c]{@{}l@{}}Reacher 2D\\ 5 joints\end{tabular}}  & \multirow{8}{*}{PyBullet}                                                & A2C          & 13.43                    & 0.12                  & 49.17                      \\
                                                                                &                                                                          & ACKTR        & 11.46                    & 0.17                  & 74.65                      \\
                                                                                &                                                                          & DDPG         & 34.73                    & 0.04                  & 32.5                       \\
                                                                                &                                                                          & PPO1         & 11.49                    & 0.07                  & 43.43                      \\
                                                                                &                                                                          & PPO2         & 11.85                    & 0.05                  & 55.8                       \\
                                                                                &                                                                          & SAC          & 47.11                    & 0.22                  & 49.86                      \\
                                                                                &                                                                          & TRPO         & 10.16                    & 0.06                  & 62.67                      \\
                                                                                &                                                                          & TD3          & 36.76                    & 0.18                  & 49.22                      \\ \hline
\multirow{8}{*}{\begin{tabular}[c]{@{}l@{}}Reacher 2D\\ 6 joints\end{tabular}}  & \multirow{8}{*}{PyBullet}                                                & A2C          & 14.47                    & 0.04                  & 60.25                      \\
                                                                                &                                                                          & ACKTR        & 12.38                    & 0.14                  & 67.86                      \\
                                                                                &                                                                          & DDPG         & 35.98                    & 0.11                  & 49.82                      \\
                                                                                &                                                                          & PPO1         & 12.39                    & 0.05                  & 48                         \\
                                                                                &                                                                          & PPO2         & 12.61                    & 0.07                  & 30.71                      \\
                                                                                &                                                                          & SAC          & 46.19                    & 0.14                  & 45.93                      \\
                                                                                &                                                                          & TRPO         & 10.63                    & 0.06                  & 34.67                      \\
                                                                                &                                                                          & TD3          & 35.74                    & 0.07                  & 58.14                      \\ \hline
\multirow{8}{*}{\begin{tabular}[c]{@{}l@{}}Jaco 3D\\ 6 joints\end{tabular}}     & \multirow{8}{*}{\begin{tabular}[c]{@{}l@{}}ROS / \\ Gazebo\end{tabular}} & A2C          &                          &                       &                            \\
                                                                                &                                                                          & ACKTR        &                          &                       &                            \\
                                                                                &                                                                          & DDPG         &                          &                       &                            \\
                                                                                &                                                                          & PPO1         &                          &                       &                            \\
                                                                                &                                                                          & PPO2         &                          &                       &                            \\
                                                                                &                                                                          & SAC          &                          &                       &                            \\
                                                                                &                                                                          & TRPO         &                          &                       &                            \\
                                                                                &                                                                          & TD3          &                          &                       &                            \\ \hline
\multirow{8}{*}{\begin{tabular}[c]{@{}l@{}}Jaco 3D\\ 6 joints\end{tabular}}     & \multirow{8}{*}{Real world}                                              & A2C          &                          &                       &                            \\
                                                                                &                                                                          & ACKTR        &                          &                       &                            \\
                                                                                &                                                                          & DDPG         &                          &                       &                            \\
                                                                                &                                                                          & PPO1         &                          &                       &                            \\
                                                                                &                                                                          & PPO2         &                          &                       &                            \\
                                                                                &                                                                          & SAC          &                          &                       &                            \\
                                                                                &                                                                          & TRPO         &                          &                       &                            \\
                                                                                &                                                                          & TD3          &                          &                       &                         \\  
\hline
\end{longtable}
%\end{table}






Complexity to add later:
\begin{enumerate}
  \item Reach target position and orientation
  \item Presence of obstacles
  \item Target is moving during operation
\end{enumerate}

\section{Performance plots - sorted by algorithm}


\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth]{../A2C.pdf}
\caption{Performance metrics of the A2C algorithm.}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth]{../ACKTR.pdf}
\caption{Performance metrics of the ACKTR algorithm.}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth]{../DDPG.pdf}
\caption{Performance metrics of the DDPG algorithm.}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth]{../PPO1.pdf}
\caption{Performance metrics of the PPO1 algorithm.}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth]{../PPO2.pdf}
\caption{Performance metrics of the PPO2 algorithm.}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth]{../SAC.pdf}
\caption{Performance metrics of the SAC algorithm.}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth]{../TD3.pdf}
\caption{Performance metrics of the TD3 algorithm.}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth]{../TRPO.pdf}
\caption{Performance metrics of the TRPO algorithm.}
\end{figure}



\section{Performance plots - sorted by number of joints}

\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth]{../Reacher1Dof-v0/reacher1.pdf}
\caption{Performance metrics of the Reacher 1 DoF robot.}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth]{../Reacher2Dof-v0/reacher2.pdf}
\caption{Performance metrics of the Reacher 2 DoF robot.}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth]{../Reacher3Dof-v0/reacher3.pdf}
\caption{Performance metrics of the Reacher 3 DoF robot.}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth]{../Reacher4Dof-v0/reacher4.pdf}
\caption{Performance metrics of the Reacher 4 DoF robot.}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth]{../Reacher5Dof-v0/reacher5.pdf}
\caption{Performance metrics of the Reacher 5 DoF robot.}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth]{../Reacher6Dof-v0/reacher6.pdf}
\caption{Performance metrics of the Reacher 6 DoF robot.}
\end{figure}



\section{Findings summary}

\begin{enumerate}
  \item The training time increases as the environment complexity increases (i.e. robot with a higher number of joints), which is expected.
  \item SAC and DDPG are the least time-efficient algorithms for the Reacher environment.
  \item SAC achieved the higher success ratio.
  \item In general, the algorithms achieved a very low success ratio. As indicated in the Stable Baselines documentation, it is recommended to normalise the observations, actions and rewards and to tune the algorithm's hyperparameters to increase the performance. Also, regarding the performance evaluation of the agents, it is necessary to initialise the training with various random seeds and take the average performance in order to obtain a more meaningful comparison.
  \item A robot with more joints will generally take more time steps to reach the target, as expected.
  \item The best agent was trained with ACKTR for the 2DoF Reacher environment (0.91 success ratio).
\end{enumerate}

The next steps will consist in:
\begin{enumerate}
	\item normalising the observations, actions and rewards.
	\item carrying out hyperparameter tuning.
	\item initialising the training with various random seeds and average performance over these trained environments.
\end{enumerate}
 


\end{document}